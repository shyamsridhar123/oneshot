# OneShot Environment Configuration
# Copy this file to .env and fill in your values
# cp .env.example .env

# ============================================
# Azure OpenAI Configuration (Required)
# ============================================

# Your Azure OpenAI resource endpoint
# Format: https://<your-resource-name>.openai.azure.com
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com

# Your Azure OpenAI API Key (optional â€” DefaultAzureCredential used by default)
# Only set this if you cannot use Azure Identity (e.g., local dev without az login)
# AZURE_OPENAI_API_KEY=your-api-key-here

# API Version (optional - defaults to latest stable)
AZURE_OPENAI_API_VERSION=2025-03-01-preview

# ============================================
# Model Deployments
# ============================================

# Primary chat model for agent conversations
# Recommended: GPT-5.2 or GPT-4o for best results
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-5.2-chat

# Secondary model for fallback/specialized tasks
AZURE_OPENAI_GPT5_DEPLOYMENT_NAME=gpt-5.1

# Code-specialized model for analysis tasks
AZURE_OPENAI_CODEX_DEPLOYMENT_NAME=gpt-5.1-codex-max

# Text embedding model for semantic search/RAG
# Recommended: text-embedding-3-small or text-embedding-3-large
AZURE_OPENAI_TEXTEMBEDDING_DEPLOYMENT_NAME=text-embedding-3-small

# ============================================
# Database Configuration
# ============================================

# SQLite database with async support
# Default location: ./data/oneshot.db (relative to backend/)
# In Azure Container Apps, infrastructure injects `DATABASE_URL` via Key Vault secret reference.
DATABASE_URL=sqlite+aiosqlite:///./data/oneshot.db

# ============================================
# Application Settings (Optional)
# ============================================

# Environment: development, staging, production
APP_ENV=development

# Enable debug mode (verbose logging, SQL echo)
APP_DEBUG=true

# Server host and port
APP_HOST=0.0.0.0
APP_PORT=8000

# ============================================
# Agent Framework Settings (Optional)
# ============================================

# Maximum steps per agent workflow
AGENTFLOW_MAX_STEPS=10

# Maximum time (seconds) for agent execution
AGENTFLOW_MAX_TIME=300

# Enable verbose agent logging
AGENTFLOW_VERBOSE=true

# ============================================
# CORS Configuration (Optional)
# ============================================

# Comma-separated list of allowed origins
# Default allows localhost:3000 for development
ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# Optional regex for allowed origins (useful for dynamic Azure Container Apps hostnames)
# Example: ^https://.*\.azurecontainerapps\.io$
# ALLOWED_ORIGIN_REGEX=

# ============================================
# Frontend API Configuration (Optional)
# ============================================

# Public API base URL consumed by the Next.js client.
# For local development this can stay unset and defaults to http://localhost:8000.
NEXT_PUBLIC_API_URL=http://localhost:8000

# Public WebSocket URL consumed by live agent streaming.
# For local development this can stay unset and defaults to ws://localhost:8000.
NEXT_PUBLIC_WS_URL=ws://localhost:8000

# Runtime-only server vars (recommended for Azure Container Apps).
# These are read by RootLayout at request time and injected into the browser.
# RUNTIME_API_URL=
# RUNTIME_WS_URL=
