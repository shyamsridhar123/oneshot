name: techvista-smc
metadata:
  template: ai-foundry-avm
infra:
  provider: bicep
  path: infra/ai-foundry
  parameters:
    - path: infra/ai-foundry/params/main.bicepparam
  outputs:
    aiFoundryAccountName: AI_FOUNDRY_ACCOUNT_NAME
    aiProjectName: AI_FOUNDRY_PROJECT_NAME
    aiSearchName: AI_SEARCH_SERVICE_NAME
    cosmosAccountName: COSMOS_ACCOUNT_NAME
    keyVaultName: KEYVAULT_NAME
    storageAccountOutputName: BRAND_STORAGE_ACCOUNT_NAME
    brandDataContainerResourceId: BRAND_DATA_CONTAINER_ID
    draftsContainerResourceId: DRAFTS_CONTAINER_ID
    draftsShareResourceId: DRAFTS_SHARE_ID
    containerRegistryName: AZURE_CONTAINER_REGISTRY_NAME
    containerRegistryLoginServer: AZURE_CONTAINER_REGISTRY_ENDPOINT
    containerAppsEnvironmentId: AZURE_CONTAINER_APPS_ENVIRONMENT_ID
    backendContainerAppName: BACKEND_CONTAINER_APP_NAME
    frontendContainerAppName: FRONTEND_CONTAINER_APP_NAME
    backendEndpoint: BACKEND_ENDPOINT
    frontendEndpoint: FRONTEND_ENDPOINT
services:
  backend:
    project: ./backend
    host: containerapp
    language: python
    docker:
      path: ./Dockerfile
    resourceName: ${BACKEND_CONTAINER_APP_NAME}
  frontend:
    project: ./frontend
    host: containerapp
    language: js
    docker:
      path: ./Dockerfile
    resourceName: ${FRONTEND_CONTAINER_APP_NAME}
